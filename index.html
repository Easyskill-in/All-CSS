<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair:opsz,wdth,wght@5..1200,102.9,900&family=Special+Gothic+Condensed+One&display=swap"
        rel="stylesheet">
</head>
<style>
    body {
        background-color: black;
    }

    img {
        height: 200px;
    }

    .main {
        /* min-width: 200px;
        max-width: 300px;
        min-height: 200px;
        max-height: 700px; */
    }
</style>

<body>

    <h1>Hello CSS</h1>
    <div class="main" style="background-color: blue;">
        <img src="https://plus.unsplash.com/premium_photo-1666777247416-ee7a95235559?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            alt="">
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Pariatur
            consectetur
            dolores rem eligendi sapiente
            numquam voluptatibus hic, culpa quisquam? Voluptate ab reiciendis sunt quo nulla exercitationem ducimus,

            adipisci natus.</p>
        <a href="#">Click Me</a>
    </div>
</body>

</html>

/*
Samajhte hain **`fileFilter`** ko **simple Hindi + thoda detail** me ðŸ™‚

---

## ðŸ“Œ `fileFilter` kya hota hai?

`fileFilter` ek **function** hota hai jo decide karta hai:

> **Kaunsi file upload allow hogi aur kaunsi reject**

Matlab file server par **save hone se pehle** hi check hoti hai.

---

## ðŸ§  `fileFilter` ka kaam

Jab koi file upload hoti hai:

1. Multer file ko read karta hai
2. **`fileFilter` function call hota hai**
3. Aap decide karte ho:

* âœ” File allow
* âŒ File reject

---

## ðŸ”§ Basic structure

```js
fileFilter: (req, file, cb) => {
cb(null, true); // allow
cb(null, false); // reject (no error)
cb(new Error("message")); // reject with error
}
```

### Isme 3 cheezein hoti hain:

| Parameter | Meaning |
| --------- | -------------------------------- |
| `req` | Express request object |
| `file` | Upload ho rahi file ki info |
| `cb` | callback (decision dene ke liye) |

---

## ðŸ“ `file` object me kya hota hai?

```js
file = {
fieldname: 'image',
originalname: 'photo.png',
encoding: '7bit',
mimetype: 'image/png'
}
```

ðŸ‘‰ **Sabse important:** `file.mimetype`

---

## âœ… Common Use Case 1: Sirf images allow

```js
fileFilter: (req, file, cb) => {
if (file.mimetype.startsWith("image/")) {
cb(null, true); // allow
} else {
cb(new Error("Only images allowed"), false);
}
}
```

---

## âœ… Common Use Case 2: Specific file types

```js
const allowedTypes = ["image/jpeg", "image/png", "application/pdf"];

fileFilter: (req, file, cb) => {
if (allowedTypes.includes(file.mimetype)) {
cb(null, true);
} else {
cb(new Error("Invalid file type"));
}
}
```

---

## âŒ Difference: `false` vs `Error`

```js
cb(null, false);
```

* File silently reject
* `req.file` = undefined
* No error message

```js
cb(new Error("Only images allowed"));
```

* Error throw hota hai
* Client ko error response milta hai

ðŸ‘‰ **Production me hamesha Error use karo**

---

## ðŸ” Security kyun important hai?

Agar `fileFilter` nahi lagaya:
âŒ koi bhi `.exe`, `.js`, `.php` upload ho sakti hai
âŒ Server compromise ho sakta hai

---

## ðŸ— Real Project Example

```js
const upload = multer({
storage,
limits: { fileSize: 2 * 1024 * 1024 },
fileFilter: (req, file, cb) => {
if (!file.mimetype.startsWith("image/")) {
return cb(new Error("Only image files allowed"));
}
cb(null, true);
}
});
```

---

## ðŸ§  Easy yaad rakhne ka rule

> **fileFilter = gatekeeper**

* File ko andar jaane de?
* Ya bahar nikaal de?

---

Agar chaho to main:

* `fileFilter` + **extension check**
* **image + pdf together**
* **custom error handling**
* **interview questions**

bhi samjha deta hoon ðŸ˜„

*/